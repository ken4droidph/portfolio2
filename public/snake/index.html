<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Slither.io Clone - Mobile Responsive</title>
<style>
  body { margin:0; overflow:hidden; background:#0f0f30; font-family:Arial,sans-serif; color:white;}
  #score { position:absolute; top:10px; left:10px; font-size:20px; z-index:10;}
  #controls { position:absolute; top:50px; left:10px; z-index:10; display:none; }
  button { margin:5px; padding:10px 15px; font-size:16px; cursor:pointer; border:none; border-radius:5px; background:#4ecdc4; color:#fff; }
  canvas { display:block; border:5px solid #fff; }
  #startBtn { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); padding:15px 30px; font-size:20px; cursor:pointer; background:#4ecdc4; border:none; border-radius:10px; color:#fff; z-index:10;}

  /* Mobile on-screen controls */
  #mobileControls { position:absolute; bottom:20px; left:50%; transform:translateX(-50%); display:none; z-index:10; }
  .mobile-btn { width:60px; height:60px; margin:5px; font-size:24px; border-radius:50%; background:#4ecdc4; color:#fff; border:none; opacity:0.7; }
</style>
</head>
<body>
<div id="score">Score: 0</div>

<div id="controls">
  <button id="addWallBtn">Add Wall</button>
  <button id="speedUpBtn">AI Speed +</button>
  <button id="speedDownBtn">AI Speed -</button>
</div>

<!-- Mobile arrows -->
<div id="mobileControls">
  <div style="display:flex; justify-content:center;">
    <button class="mobile-btn" id="upBtn"></button>
  </div>
  <div style="display:flex; justify-content:center;">
    <button class="mobile-btn" id="leftBtn"></button>
    <button class="mobile-btn" id="downBtn"></button>
    <button class="mobile-btn" id="rightBtn"></button>
  </div>
</div>

<canvas id="gameCanvas"></canvas>
<button id="startBtn">START GAME</button>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// Snake
let snake = [];
let snakeLength = 5;
const snakeSpeed = 3;
let direction = {x:1, y:0};
let nextDirection = {x:1, y:0};

// Food
let food = [];
const foodCount = 30;
const foodRadius = 8;
let boostFood = null;
const boostRadius = 25;
let foodsEaten = 0;

// Game state
let gameOver = false;
let running = false;

// AI Walls
let aiEnemies = [];
const aiSize = 70;
let aiSpeed = 1.5;

// Mobile detection
const isMobile = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
if(isMobile){
  document.getElementById('mobileControls').style.display='block';
}

// Generate food
function generateFood(){
  food = [];
  for(let i=0;i<foodCount;i++){
    food.push({ x: Math.random()*(canvas.width-40)+20, y: Math.random()*(canvas.height-40)+20, eaten:false, color:`hsl(${Math.random()*360},70%,60%)` });
  }
}

// Generate boost
function generateBoostFood(){
  boostFood = { x: Math.random()*(canvas.width-60)+30, y: Math.random()*(canvas.height-60)+30, eaten:false, color:`hsl(${Math.random()*360},70%,50%)`, size: boostRadius, label:"x2" };
}

// Add AI wall
function addAIWall(){
  aiEnemies.push({
    x: Math.random()*(canvas.width-aiSize),
    y: Math.random()*(canvas.height-aiSize),
    vx: (Math.random() < 0.5 ? 1 : -1) * aiSpeed,
    vy: (Math.random() < 0.5 ? 1 : -1) * aiSpeed,
    visible: true
  });
}

// Reset game
function resetGame(){
  document.getElementById('controls').style.display='block'; // Show buttons

  snakeLength = 5;
  snake = [];
  for(let i=0;i<snakeLength;i++){ 
    snake.push({x:canvas.width/2 - i*10, y:canvas.height/2}); 
  }
  direction = {x:1, y:0};
  nextDirection = {x:1, y:0};
  gameOver = false;
  foodsEaten = 0;
  generateFood();
  boostFood = null;
  aiEnemies = [];
  document.getElementById('score').innerText = "Score: 0";
  running = true;
  document.getElementById('startBtn').style.display='none';
  requestAnimationFrame(gameLoop);
}

// Button events
document.getElementById('startBtn').addEventListener('click', resetGame);
document.getElementById('addWallBtn').addEventListener('click', addAIWall);
document.getElementById('speedUpBtn').addEventListener('click', ()=>{
  aiSpeed += 0.5;
  aiEnemies.forEach(ai => { ai.vx = (ai.vx>0?1:-1)*aiSpeed; ai.vy = (ai.vy>0?1:-1)*aiSpeed; });
});
document.getElementById('speedDownBtn').addEventListener('click', ()=>{
  aiSpeed = Math.max(0.5, aiSpeed-0.5);
  aiEnemies.forEach(ai => { ai.vx = (ai.vx>0?1:-1)*aiSpeed; ai.vy = (ai.vy>0?1:-1)*aiSpeed; });
});

// Keyboard controls
document.addEventListener('keydown',(e)=>{
  if(!running) return;
  switch(e.key){
    case "ArrowUp": if(direction.y!==1){nextDirection={x:0,y:-1}} break;
    case "ArrowDown": if(direction.y!==-1){nextDirection={x:0,y:1}} break;
    case "ArrowLeft": if(direction.x!==1){nextDirection={x:-1,y:0}} break;
    case "ArrowRight": if(direction.x!==-1){nextDirection={x:1,y:0}} break;
  }
});

// Mobile controls
if(isMobile){
  document.getElementById('upBtn').addEventListener('touchstart', ()=>{ if(direction.y!==1) nextDirection={x:0,y:-1}; });
  document.getElementById('downBtn').addEventListener('touchstart', ()=>{ if(direction.y!==-1) nextDirection={x:0,y:1}; });
  document.getElementById('leftBtn').addEventListener('touchstart', ()=>{ if(direction.x!==1) nextDirection={x:-1,y:0}; });
  document.getElementById('rightBtn').addEventListener('touchstart', ()=>{ if(direction.x!==-1) nextDirection={x:1,y:0}; });
}

// Game loop
function gameLoop(){
  if(gameOver){
    ctx.fillStyle="rgba(0,0,0,0.5)";
    ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle="#fff";
    ctx.font="40px Arial";
    ctx.textAlign="center";
    ctx.fillText("GAME OVER", canvas.width/2, canvas.height/2);
    document.getElementById('startBtn').style.display='block';
    return;
  }

  ctx.fillStyle="#0f0f30";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  direction = nextDirection;
  const head = snake[snake.length-1];
  const newHead = {x: head.x + direction.x*snakeSpeed, y: head.y + direction.y*snakeSpeed};
  snake.push(newHead);
  if(snake.length > snakeLength) snake.shift();

  if(newHead.x < 5 || newHead.x > canvas.width-5 || newHead.y < 5 || newHead.y > canvas.height-5){
    gameOver = true;
  }

  // Draw snake body
  for(let i=0;i<snake.length-1;i++){
    ctx.fillStyle = `hsl(${i*5},70%,60%)`;
    ctx.beginPath();
    ctx.arc(snake[i].x,snake[i].y,10,0,Math.PI*2);
    ctx.fill();
  }
  // Draw head
  ctx.fillStyle="#fff";
  ctx.beginPath();
  ctx.arc(head.x, head.y, 10, 0, Math.PI*2);
  ctx.fill();

  // Normal food
  food.forEach(f=>{
    if(!f.eaten){
      ctx.fillStyle=f.color;
      ctx.beginPath();
      ctx.arc(f.x,f.y,foodRadius,0,Math.PI*2);
      ctx.fill();
      const dx=f.x-newHead.x;
      const dy=f.y-newHead.y;
      if(Math.sqrt(dx*dx+dy*dy)<15){
        f.eaten=true;
        snakeLength++;
        foodsEaten++;
        if(foodsEaten % 15 === 0 && boostFood === null){
          generateBoostFood();
        }
      }
    }
  });

  // Respawn food
  food.forEach(f=>{
    if(f.eaten && Math.random()<0.01){
      f.eaten=false;
      f.x = Math.random()*(canvas.width-40)+20;
      f.y = Math.random()*(canvas.height-40)+20;
      f.color=`hsl(${Math.random()*360},70%,60%)`;
    }
  });

  // Boost food
  if(boostFood && !boostFood.eaten){
    ctx.fillStyle=boostFood.color;
    ctx.beginPath();
    ctx.arc(boostFood.x, boostFood.y, boostFood.size,0,Math.PI*2);
    ctx.fill();
    ctx.fillStyle="#fff";
    ctx.font="20px Arial";
    ctx.textAlign="center";
    ctx.textBaseline="middle";
    ctx.fillText(boostFood.label, boostFood.x, boostFood.y);
    const dx = boostFood.x-newHead.x;
    const dy = boostFood.y-newHead.y;
    if(Math.sqrt(dx*dx+dy*dy)<boostFood.size+10){
      boostFood.eaten=true;
      snakeLength*=2;
      boostFood=null;
    }
  }

  // AI walls (collision only with head)
  aiEnemies.forEach(ai=>{
    ai.x += ai.vx;
    ai.y += ai.vy;
    if(ai.x<0||ai.x+aiSize>canvas.width) ai.vx*=-1;
    if(ai.y<0||ai.y+aiSize>canvas.height) ai.vy*=-1;
    ctx.fillStyle="#000";
    ctx.fillRect(ai.x,ai.y,aiSize,aiSize);

    if(head.x>ai.x && head.x<ai.x+aiSize && head.y>ai.y && head.y<ai.y+aiSize){
      gameOver=true;
    }
  });

  document.getElementById('score').innerText = `Score: ${snakeLength-5}`;
  requestAnimationFrame(gameLoop);
}
</script>
</body>
</html>
